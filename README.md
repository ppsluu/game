# Игра "Артефакты"

Простая консольная игра с ветвлением, артефактами и системой сохранения.

## Структура проекта

### 1. `player.py` - Класс игрока (P)
Простой класс для хранения данных игрока:
- `n` - имя/логин
- `lvl` - уровень
- `hp`, `max_hp` - здоровье
- `mana`, `max_mana` - мана (используется для лечения)
- `art` - список артефактов
- `prog` - прогресс по ветке
- `branch` - текущая ветка (0=нет, 1-3=ветки)
- `saved` - флаг сохранения

Методы:
- `add_art(a)` - добавить артефакт (увеличивает HP и ману на 5)
- `save(fname)` - сохранить прогресс в JSON
- `load(fname)` - загрузить прогресс

### 2. `artifacts.py` - Копилка артефактов (ABox)
Система управления артефактами:
- `all` - все существующие артефакты
- `in_box` - артефакты в копилке (доступные)

Методы:
- `take(name)` - взять артефакт из копилки
- `return_art(arts)` - вернуть артефакты в копилку
- `gen_new()` - автоматически генерирует новые артефакты если все собраны
- `is_empty()` - проверяет, все ли артефакты собраны
- `save(fname)` / `load(fname)` - сохранение/загрузка

### 3. `game.py` - Главный файл игры

#### Функции авторизации:
- `reg()` - регистрация (логин:пароль в открытом виде в users.txt)
- `auth()` - вход по логину/паролю
- `main_menu()` - главное меню

#### Ветки (3 сюжетные линии):
- `branch_1()` - Ветка 1: Лес (разветвленная)
- `branch_2()` - Ветка 2: Город (разветвленная)
- `branch_3()` - Ветка 3: Подземелье (разветвленная)

Каждая ветка имеет несколько уровней ветвления через `if`:
- Первый выбор (prog=0): 2 варианта
- Второй выбор (prog=1 или 2): еще 2 варианта
- Итого: 4 возможных пути в каждой ветке

#### Игровой цикл:
- `game_loop(p, ab)` - основной цикл игры
  - Выбор ветки из меню
  - Прохождение ветки
  - Сохранение прогресса (опционально)
  - Выход с проверкой сохранения
  - Обмен артефакта на HP

#### Система маны:
- Мана используется для лечения в бою (стоимость: 15 маны)
- Лечение восстанавливает 12-20 HP случайным образом
- Мана восстанавливается при повышении уровня (+10)
- Максимальная мана увеличивается при повышении уровня (+3) и при получении артефакта (+5)
- Начальная мана: 50, максимальная мана: 50

#### Обмен артефактов:
- `trade_art_for_hp(p, ab)` - функция обмена артефакта на HP
- Можно обменять любой артефакт из инвентаря на 20 HP
- Артефакт возвращается в общую копилку после обмена
- Обмен доступен из главного меню (пункт 6)
- HP не может превысить максимальное значение

#### Система сохранения:
- Если игрок не сохранился перед выходом - прогресс сгорает
- Артефакты автоматически возвращаются в копилку при выходе без сохранения
- Сохранение создает файлы: `save_{логин}.json` и `artifacts.json`

#### Генерация артефактов:
- Если все артефакты собраны (все у игроков) - автоматически генерируются новые
- Новые артефакты добавляются в общий список

## Как запустить

```bash
python game.py
```

## Пример использования:

1. Запустить `python game.py`
2. Зарегистрироваться или войти
3. Выбрать ветку (1, 2 или 3)
4. Проходить ветку, делая выборы
5. Собирать артефакты
6. Использовать ману для лечения в бою (пункт 3 в бою)
7. Обменивать артефакты на HP при необходимости (пункт 6 в главном меню)
8. Сохраняться перед выходом (иначе прогресс сгорит!)

## Система маны

Мана — это ресурс, который используется для лечения в бою:
- **Лечение в бою**: стоит 15 маны, восстанавливает 12-20 HP
- **Восстановление маны**: 
  - При повышении уровня: +10 к текущей мане и +3 к максимальной
  - При получении артефакта: +5 к максимальной мане и +5 к текущей
- **Начальные значения**: 50 маны из 50 максимальной
- Мана отображается в формате: `мана/максимальная_мана`

## Обмен артефактов на HP

Если у тебя мало HP, но есть лишние артефакты, можно обменять их:
- **Как обменять**: выбери пункт "6. Обменять артефакт на HP" в главном меню
- **Что получаешь**: 20 HP за один артефакт
- **Что теряешь**: артефакт возвращается в общую копилку
- **Ограничения**: HP не может превысить максимальное значение
- **Стратегия**: полезно, когда нужно быстро восстановить здоровье перед важным боем

## Файлы данных:

- `users.txt` - логин:пароль (открытый текст)
- `save_{логин}.json` - сохранение игрока
- `artifacts.json` - сохранение копилки артефактов


